(this["webpackJsonpreact-apollo-course-frontend"]=this["webpackJsonpreact-apollo-course-frontend"]||[]).push([[0],{171:function(e,a,t){e.exports=t(202)},176:function(e,a,t){},202:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(20),c=t.n(l),i=(t(176),t(94)),o=t(95),m=t(141),u=t(12),d=t(128),s=t(251),h=t(254),g=t(252),p=t(154),b=t.n(p),f=t(153),E=t.n(f),v=t(143),O=t.n(v),j=t(5),C=Object(j.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#212121"}}}),{withTheme:!0}),w=t(57),y=t(59),$=t(250),S=t(113),N=t.n(S),I=Object(j.a)((function(e){return{wrapper:{position:"relative",minHeight:"calc(100vh - 24px * 2 - 72px)"},fab:{position:"absolute",bottom:"0.5rem",right:"4rem"}}})),k=t(259),x=t(234),D=t(260),M=t(237),B=t(262),F=t(258),A=t(261),Q=t(263),T=t(238),q=t(257),W=t(240),R=t(107),V=t.n(R),H=t(142),G=t(138),J=t(255),P=Object(j.a)((function(e){return{container:{padding:e.spacing(2)},title:{paddingBottom:0},textField:{width:"100%"},formControl:{minWidth:120},formControlSelect:{marginTop:e.spacing(2),width:"100%"},wrapper:{marginTop:e.spacing(2),display:"flex",justifyContent:"space-between"},button:{minWidth:100}}})),X=t(24),K=t(22);function L(){var e=Object(X.a)(["\n    mutation updateMovie($id: ID, $name: String!, $genre: String!, $watched: Boolean!, $rate: Int, $directorId: ID!) {\n        updateMovie(id: $id, name: $name, genre: $genre, watched: $watched, rate: $rate, directorId: $directorId) {\n            name\n        }\n    }\n"]);return L=function(){return e},e}function z(){var e=Object(X.a)(["\n    mutation addMovie($name: String!, $genre: String!, $watched: Boolean!, $rate: Int, $directorId: ID!) {\n        addMovie(name: $name, genre: $genre, watched: $watched, rate: $rate, directorId: $directorId) {\n            name\n        }\n    }\n"]);return z=function(){return e},e}var U=Object(K.a)(z()),Y=Object(K.a)(L());function Z(){var e=Object(X.a)(["\n    query moviesQuery($name: String) {\n        movies(name: $name) {\n            id\n            name\n            genre\n            watched\n            rate\n            director {\n                name\n                id\n            }\n        }\n    } \n"]);return Z=function(){return e},e}var _=Object(K.a)(Z());function ee(){var e=Object(X.a)(["\n    query directorsQuery($name: String) {\n        directors(name: $name) {\n            id\n            name\n        }\n    } \n"]);return ee=function(){return e},e}var ae=Object(K.a)(ee()),te=P((function(e){var a=e.selectedValue,t=void 0===a?{}:a,l=e.onClose,c=e.classes,i=e.open,o=e.handleChange,m=e.handleSelectChange,d=e.handleCheckboxChange,s=Object(n.useState)(!1),h=Object(u.a)(s,2),g=h[0],p=h[1],b=Object(H.a)(U),f=Object(u.a)(b,1)[0],E=Object(H.a)(Y),v=Object(u.a)(E,1)[0],O=Object(G.a)(ae,{variables:{name:""}}).data,j=(void 0===O?{}:O).directors,C=void 0===j?[]:j;return r.a.createElement(k.a,{onClose:function(){return l()},open:i,"aria-labelledby":"simple-dialog-title"},r.a.createElement(x.a,{className:c.title,id:"simple-dialog-title"},"Movie information"),r.a.createElement("form",{action:"/",className:c.container,noValidate:!0,autoComplete:"off"},r.a.createElement(D.a,{id:"outlined-name",label:"Name",className:c.textField,value:t.name,onChange:o("name"),margin:"normal",variant:"outlined"}),r.a.createElement(D.a,{id:"outlined-genre",label:"Genre",className:c.textField,value:t.genre,onChange:o("genre"),margin:"normal",variant:"outlined"}),r.a.createElement(D.a,{id:"outlined-rate",label:"Rate",value:t.rate,onChange:o("rate"),type:"number",className:c.textField,margin:"normal",variant:"outlined"}),r.a.createElement(M.a,{variant:"outlined",className:c.formControlSelect},r.a.createElement(B.a,{ref:function(e){},htmlFor:"outlined-age-simple"},"Director"),r.a.createElement(F.a,{value:t.directorId,onChange:m,input:r.a.createElement(A.a,{name:"directorId",id:"outlined-director",labelWidth:57})},C.map((function(e){return r.a.createElement(Q.a,{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:c.wrapper},r.a.createElement(T.a,{control:r.a.createElement(q.a,{checked:t.watched,onChange:d("watched"),value:"watched"}),label:"Watched movie"}),r.a.createElement(W.a,{onClick:function(){var e=t.id,a=t.name,n=t.genre,r=t.rate,c=t.directorId,i=t.watched;""===a||""===n||""===c?p(!0):(e?v({variables:{id:e,name:a,genre:n,rate:Number(r),directorId:c,watched:Boolean(i)},refetchQueries:[{query:_,variables:{name:""}}]}):f({variables:{name:a,genre:n,rate:Number(r),directorId:c,watched:Boolean(i)},refetchQueries:[{query:_,variables:{name:""}}]}),p(!1),l())},variant:"contained",color:"primary",className:c.button},r.a.createElement(V.a,null)," Save"))),g&&r.a.createElement(J.a,{severity:"error"},"Please note the movie's name and genre and choose the director"))})),ne=t(204),re=t(244),le=t(245),ce=t(246),ie=t(247),oe=t(248),me=t(249),ue=t(239),de=t(156),se=t(110),he=t.n(se),ge=t(112),pe=t.n(ge),be=t(111),fe=t.n(be),Ee=t(140),ve=Object(j.a)((function(e){return{searchRoot:{marginBottom:e.spacing(3),minHeight:e.spacing(6),display:"flex"},root:{width:"100%",overflowX:"auto"}}})),Oe=t(241),je=t(242),Ce=t(243),we=t(151),ye=t.n(we),$e=t(108),Se=t.n($e),Ne=function(e){var a=e.open,t=e.handleClose,n=e.handleDelete;return r.a.createElement(k.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(x.a,{id:"alert-dialog-title"},"Are you sure that you want to delete element?"),r.a.createElement(Oe.a,null,r.a.createElement(je.a,{id:"alert-dialog-description"},"If you click 'Confirm' this element will be removed from data base.")),r.a.createElement(Ce.a,null,r.a.createElement(W.a,{onClick:t,color:"primary"},r.a.createElement(Se.a,null)," Cancel"),r.a.createElement(W.a,{onClick:n,color:"primary",autoFocus:!0},r.a.createElement(ye.a,null)," Confirm")))};function Ie(){var e=Object(X.a)(["\n    mutation deleteMovie($id: ID) {\n        deleteMovie(id: $id) {\n            id\n        }\n    }\n"]);return Ie=function(){return e},e}var ke=Object(K.a)(Ie()),xe=function(e){var a=e.id,t=e.handleClose,n=e.open,l=Object(H.a)(ke),c=Object(u.a)(l,1)[0];return r.a.createElement(Ne,{open:n,handleClose:t,handleDelete:function(){c({variables:{id:a},refetchQueries:[{query:_,variables:{name:""}}]}),t()}})},De=t(159),Me=t(152),Be=t.n(Me),Fe=Object(j.a)((function(e){return{search:{position:"relative",width:"100%",marginBottom:e.spacing(3)},searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(10)}}}))((function(e){var a=e.classes,t=e.name,n=e.handleChange,l=e.handleSearch,c=e.placeholderName;return r.a.createElement("div",{className:a.search},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(Be.a,null)),r.a.createElement(De.a,{onChange:n,onKeyPress:function(e){return l(e)},value:t,placeholder:c,classes:{root:a.inputRoot,input:a.inputInput}}))})),Ae=function(e){var a=e.name,t=e.handleChange,n=e.handleSearch;return r.a.createElement(Fe,{name:a,handleChange:t,handleSearch:n,placeholderName:"Movies Search"})},Qe=ve((function(e){var a=e.classes,t=e.onOpen,l=Object(n.useState)([]),c=Object(u.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),s=d[0],h=d[1],g=Object(n.useState)(!1),p=Object(u.a)(g,2),b=p[0],f=p[1],E=Object(n.useState)({}),v=Object(u.a)(E,2),O=v[0],j=v[1],C=Object(n.useState)(""),w=Object(u.a)(C,2),y=w[0],$=w[1],S=Object(Ee.a)(_),N=Object(u.a)(S,2),I=N[0],k=N[1],x=k.loading,D=k.data,M=k.fetchMore;Object(n.useEffect)((function(){I({variables:{name:""}}),D&&o(D.movies)}),[I,D]);var B=function(){return h(null)},F=function(){t(O),B()},A=function(){T(),B()},T=function(){return f(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,null,r.a.createElement(Ae,{name:y,handleChange:function(e){$(e.target.value)},handleSearch:function(e){13===e.charCode&&M({variables:{name:y},updateQuery:function(e,a){return a.fetchMoreResult}})}})),r.a.createElement(xe,{open:b,handleClose:function(){return f(!1)},id:O.id}),x?r.a.createElement(re.a,{color:"primary"}):r.a.createElement(ne.a,{className:a.root},r.a.createElement(le.a,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(oe.a,null,"Name"),r.a.createElement(oe.a,null,"Genre"),r.a.createElement(oe.a,{align:"right"},"Rate"),r.a.createElement(oe.a,null,"Director"),r.a.createElement(oe.a,null,"Watched"),r.a.createElement(oe.a,{align:"right"}))),r.a.createElement(me.a,null,i.map((function(e){return r.a.createElement(ie.a,{key:e.id},r.a.createElement(oe.a,{component:"th",scope:"row"},e.name),r.a.createElement(oe.a,null,e.genre),r.a.createElement(oe.a,{align:"right"},e.rate),r.a.createElement(oe.a,null,e.director.name),r.a.createElement(oe.a,null,r.a.createElement(q.a,{checked:e.watched,disabled:!0})),r.a.createElement(oe.a,{align:"right"},r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{color:"inherit",onClick:function(a){return function(e,a){var t=e.currentTarget;h(t),j(a)}(a,e)}},r.a.createElement(he.a,null)),r.a.createElement(de.a,{id:"simple-menu",anchorEl:s,open:Boolean(s),onClose:B},r.a.createElement(Q.a,{onClick:F},r.a.createElement(fe.a,null)," Edit"),r.a.createElement(Q.a,{onClick:A},r.a.createElement(pe.a,null)," Delete")))))}))))))})),Te=I((function(e){var a=e.classes,t=Object(n.useState)({id:"",open:!1,name:"",genre:"",watched:!1,rate:0,directorId:""}),l=Object(u.a)(t,2),c=l[0],i=l[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i((function(a){return Object(y.a)({},a,{},e,{open:!0,directorId:e.director?e.director.id:""})}))},m=function(){i({name:"",genre:"",watched:!1,rate:0,directorId:"",open:!1,id:null})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{handleChange:function(e){return function(a){var t=a.target;i(Object(y.a)({},c,Object(w.a)({},e,t.value)))}},handleSelectChange:function(e){var a=e.target;i(Object(y.a)({},c,Object(w.a)({},a.name,a.value)))},handleCheckboxChange:function(e){return function(a){var t=a.target;i(Object(y.a)({},c,Object(w.a)({},e,t.checked)))}},selectedValue:{id:c.id,name:c.name,genre:c.genre,watched:c.watched,rate:c.rate,directorId:c.directorId},open:c.open,onClose:m}),r.a.createElement("div",{className:a.wrapper},r.a.createElement(Qe,{onOpen:o,onClose:m}),r.a.createElement($.a,{onClick:function(){return o()},color:"primary","aria-label":"Add",className:a.fab},r.a.createElement(N.a,null))))})),qe=Object(j.a)((function(e){return{wrapper:{position:"relative",minHeight:"calc(100vh - 24px * 2 - 72px)"},fab:{position:"absolute",bottom:"0.5rem",right:"4rem"}}})),We=Object(j.a)((function(e){return{container:{padding:e.spacing(2)},title:{paddingBottom:0},textField:{width:"100%"},formControl:{margin:e.spacing.unit,minWidth:120},wrapper:{marginTop:e.spacing(2),display:"flex",justifyContent:"flex-end"},button:{minWidth:100,minHeight:48}}}));function Re(){var e=Object(X.a)(["\n    mutation updateDirector($id: ID, $name: String!, $age: Int!) {\n        updateDirector(id: $id, name: $name, age: $age) {\n            name\n        }\n    }\n"]);return Re=function(){return e},e}function Ve(){var e=Object(X.a)(["\n    mutation addDirector($name: String!, $age: Int!) {\n        addDirector(name: $name, age: $age) {\n            name\n        }\n    }\n"]);return Ve=function(){return e},e}var He=Object(K.a)(Ve()),Ge=Object(K.a)(Re());function Je(){var e=Object(X.a)(["\n    query directorsQuery($name: String) {\n        directors(name: $name) {\n            id\n            name\n            age\n            movies {\n                name\n                id\n            }\n        }\n    } \n"]);return Je=function(){return e},e}var Pe=Object(K.a)(Je()),Xe=We((function(e){var a=e.selectedValue,t=void 0===a?{}:a,l=e.onClose,c=e.classes,i=e.open,o=e.handleChange,m=Object(n.useState)({showAlert:!1,alertMessage:""}),d=Object(u.a)(m,2),s=d[0],h=d[1],g=Object(H.a)(He),p=Object(u.a)(g,1)[0],b=Object(H.a)(Ge),f=Object(u.a)(b,1)[0];return r.a.createElement(k.a,{onClose:function(){return l()},open:i,"aria-labelledby":"simple-dialog-title"},r.a.createElement(x.a,{className:c.title,id:"simple-dialog-title"},"Director information"),r.a.createElement("form",{action:"/",className:c.container,noValidate:!0,autoComplete:"off"},r.a.createElement(D.a,{id:"outlined-name",label:"Name",className:c.textField,value:t.name,onChange:o("name"),margin:"normal",variant:"outlined"}),r.a.createElement(D.a,{id:"outlined-genre",label:"Age",className:c.textField,value:t.age,onChange:o("age"),margin:"normal",variant:"outlined"}),r.a.createElement("div",{className:c.wrapper},r.a.createElement(W.a,{onClick:function(){var e=t.id,a=t.name,n=t.age;h({showAlert:!1,alertMessage:""}),""!==a&&Number.parseInt(n)>0?(e?f({variables:{id:e,name:a,age:Number(n)},refetchQueries:[{query:Pe,variables:{name:""}}]}):p({variables:{name:a,age:Number(n)},refetchQueries:[{query:Pe,variables:{name:""}}]}),h({showAlert:!1,alertMessage:""}),l()):""===a?h({showAlert:!0,alertMessage:"Director's name should not be empty"}):(Number.parseInt(n)<=0||!Number.parseInt(n))&&h({showAlert:!0,alertMessage:"Director's age should be a positive number"})},variant:"contained",color:"primary",className:c.button},r.a.createElement(V.a,null)," Save"))),s.showAlert&&r.a.createElement(J.a,{severity:"error"},s.alertMessage))})),Ke=Object(j.a)((function(e){return{searchRoot:{marginBottom:e.spacing(3),minHeight:e.spacing(6),display:"flex"},root:{width:"100%",overflowX:"auto"}}}));function Le(){var e=Object(X.a)(["\n    mutation deleteDirector($id: ID) {\n        deleteDirector(id: $id) {\n            id\n        }\n    }\n"]);return Le=function(){return e},e}var ze=Object(K.a)(Le()),Ue=function(e){var a=e.id,t=e.handleClose,n=e.open,l=Object(H.a)(ze),c=Object(u.a)(l,1)[0];return r.a.createElement(Ne,{open:n,handleClose:t,handleDelete:function(){c({variables:{id:a},refetchQueries:[{query:Pe,variables:{name:""}}]}),t()}})},Ye=function(e){var a=e.name,t=e.handleChange,n=e.handleSearch;return r.a.createElement(Fe,{name:a,handleChange:t,handleSearch:n,placeholderName:"Directors Search"})},Ze=function(e){var a=e.open,t=e.handleClose,n=e.errorText;return r.a.createElement(k.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Oe.a,null,r.a.createElement(je.a,{id:"alert-dialog-description"},n)),r.a.createElement(Ce.a,null,r.a.createElement(W.a,{onClick:t,color:"primary"},r.a.createElement(Se.a,null)," Cancel")))},_e=Ke((function(e){var a=e.classes,t=e.onOpen,l=Object(n.useState)([]),c=Object(u.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),s=d[0],h=d[1],g=Object(n.useState)(!1),p=Object(u.a)(g,2),b=p[0],f=p[1],E=Object(n.useState)(!1),v=Object(u.a)(E,2),O=v[0],j=v[1],C=Object(n.useState)({}),w=Object(u.a)(C,2),y=w[0],$=w[1],S=Object(n.useState)(""),N=Object(u.a)(S,2),I=N[0],k=N[1],x=Object(Ee.a)(Pe),D=Object(u.a)(x,2),M=D[0],B=D[1],F=B.loading,A=B.data,T=B.fetchMore;Object(n.useEffect)((function(){M({variables:{name:""}}),A&&o(A.directors)}),[M,A]);var q=function(){return h(null)},W=function(){y.movies.length>0?V():R(),q()},R=function(){return f(!0)},V=function(){return j(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,null,r.a.createElement(Ye,{name:I,handleChange:function(e){k(e.target.value)},handleSearch:function(e){13===e.charCode&&T({variables:{name:I},updateQuery:function(e,a){return a.fetchMoreResult}})}})),r.a.createElement(Ue,{open:b,handleClose:function(){return f(!1)},id:y.id}),r.a.createElement(Ze,{open:O,handleClose:function(){return j(!1)},errorText:"Directors with movies cannot be removed"}),F?r.a.createElement(re.a,{color:"primary"}):r.a.createElement(ne.a,{className:a.root},r.a.createElement(le.a,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(oe.a,null,"Name"),r.a.createElement(oe.a,{align:"right"},"Age"),r.a.createElement(oe.a,null,"Movies"),r.a.createElement(oe.a,null))),r.a.createElement(me.a,null,i.map((function(e){return r.a.createElement(ie.a,{key:e.id},r.a.createElement(oe.a,{component:"th",scope:"row"},e.name),r.a.createElement(oe.a,{align:"right"},e.age),r.a.createElement(oe.a,null,e.movies.map((function(e,a){return r.a.createElement("div",{key:e.name},"".concat(a+1,". "),e.name)}))),r.a.createElement(oe.a,{align:"right"},r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{color:"inherit",onClick:function(a){!function(e,a){var t=e.currentTarget;h(t),$(a)}(a,e)}},r.a.createElement(he.a,null)),r.a.createElement(de.a,{id:"simple-menu",anchorEl:s,open:Boolean(s),onClose:q},r.a.createElement(Q.a,{onClick:function(){return t(y),void q()}},r.a.createElement(fe.a,null)," Edit"),r.a.createElement(Q.a,{onClick:W},r.a.createElement(pe.a,null)," Delete")))))}))))))})),ea=qe((function(e){var a=e.classes,t=Object(n.useState)({id:null,open:!1,name:"",age:0}),l=Object(u.a)(t,2),c=l[0],i=l[1],o=function(e){i((function(a){return Object(y.a)({},a,{},e,{open:!0})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe,{handleChange:function(e){return function(a){var t=a.target;i(Object(y.a)({},c,Object(w.a)({},e,t.value)))}},selectedValue:{id:c.id,name:c.name,age:c.age},open:c.open,onClose:function(){i({name:"",age:0,id:null,open:!1})}}),r.a.createElement("div",{className:a.wrapper},r.a.createElement(_e,{onOpen:o}),r.a.createElement($.a,{onClick:function(){return o(null)},color:"primary","aria-label":"Add",className:a.fab},r.a.createElement(N.a,null))))})),aa=function(e){var a=e.children,t=e.dir;return r.a.createElement(d.a,{component:"div",dir:t,style:{padding:24}},a)},ta=C((function(e){var a=e.classes,t=e.theme,l=Object(n.useState)(0),c=Object(u.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(s.a,{position:"static"},r.a.createElement(h.a,{variant:"fullWidth",value:i,onChange:function(e,a){return o(a)}},r.a.createElement(g.a,{label:"Movies",icon:r.a.createElement(E.a,null)}),r.a.createElement(g.a,{label:"Directors",icon:r.a.createElement(b.a,null)}))),r.a.createElement(O.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:i,onChangeIndex:function(e){return o(e)}},r.a.createElement(aa,{dir:t.direction},r.a.createElement(Te,null)),r.a.createElement(aa,{dir:t.direction},r.a.createElement(ea,null))))})),na=t(253),ra=t(155),la=t(116),ca=t(115),ia=Object(ra.a)({typography:{useNextVariants:!0,color:"#fff"},palette:{type:"dark",primary:{main:"#E535AB"},secondary:la.a,error:ca.a,contrastThreshold:3,tonalOffset:.2,contrastText:"#fff"}}),oa=new i.a({uri:"https://react-apollo-course.herokuapp.com/graphql",cache:new o.a});var ma=function(){return r.a.createElement(m.a,{client:oa},r.a.createElement(na.a,{theme:ia},r.a.createElement(ta,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ma,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[171,1,2]]]);
//# sourceMappingURL=main.b42e0e14.chunk.js.map