(this["webpackJsonpreact-apollo-course-frontend"]=this["webpackJsonpreact-apollo-course-frontend"]||[]).push([[0],{171:function(e,a,n){e.exports=n(202)},176:function(e,a,n){},202:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),l=n(20),c=n.n(l),i=(n(176),n(94)),o=n(95),m=n(141),u=n(12),d=n(128),s=n(252),h=n(255),g=n(253),p=n(154),f=n.n(p),b=n(153),E=n.n(b),v=n(143),O=n.n(v),j=n(5),C=Object(j.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#212121"}}}),{withTheme:!0}),w=n(57),y=n(59),$=n(251),S=n(113),N=n.n(S),I=Object(j.a)((function(e){return{wrapper:{position:"relative",minHeight:"calc(100vh - 24px * 2 - 72px)"},fab:{position:"absolute",bottom:"0.5rem",right:"4rem"}}})),k=n(260),x=n(235),D=n(261),M=n(238),B=n(263),F=n(259),Q=n(262),T=n(264),q=n(239),A=n(258),W=n(241),R=n(107),V=n.n(R),H=n(142),G=n(138),J=n(256),P=Object(j.a)((function(e){return{container:{padding:e.spacing(2)},title:{paddingBottom:0},textField:{width:"100%"},formControl:{minWidth:120},formControlSelect:{marginTop:e.spacing(2),width:"100%"},wrapper:{marginTop:e.spacing(2),display:"flex",justifyContent:"space-between"},button:{minWidth:100}}})),X=n(24),K=n(22);function L(){var e=Object(X.a)(["\n    mutation updateMovie($id: ID, $name: String!, $genre: String!, $watched: Boolean!, $rate: Int, $directorId: ID!) {\n        updateMovie(id: $id, name: $name, genre: $genre, watched: $watched, rate: $rate, directorId: $directorId) {\n            name\n        }\n    }\n"]);return L=function(){return e},e}function z(){var e=Object(X.a)(["\n    mutation addMovie($name: String!, $genre: String!, $watched: Boolean!, $rate: Int, $directorId: ID!) {\n        addMovie(name: $name, genre: $genre, watched: $watched, rate: $rate, directorId: $directorId) {\n            name\n        }\n    }\n"]);return z=function(){return e},e}var U=Object(K.a)(z()),Y=Object(K.a)(L());function Z(){var e=Object(X.a)(["\n    query moviesQuery($name: String) {\n        movies(name: $name) {\n            id\n            name\n            genre\n            watched\n            rate\n            director {\n                name\n                id\n            }\n        }\n    } \n"]);return Z=function(){return e},e}var _=Object(K.a)(Z());function ee(){var e=Object(X.a)(["\n    query directorsQuery($name: String) {\n        directors(name: $name) {\n            id\n            name\n        }\n    } \n"]);return ee=function(){return e},e}var ae=Object(K.a)(ee()),ne=P((function(e){var a=e.selectedValue,n=void 0===a?{}:a,l=e.onClose,c=e.classes,i=e.open,o=e.handleChange,m=e.handleSelectChange,d=e.handleCheckboxChange,s=Object(t.useState)(!1),h=Object(u.a)(s,2),g=h[0],p=h[1],f=Object(H.a)(U),b=Object(u.a)(f,1)[0],E=Object(H.a)(Y),v=Object(u.a)(E,1)[0],O=Object(G.a)(ae,{variables:{name:""}}).data,j=(void 0===O?{}:O).directors,C=void 0===j?[]:j;return r.a.createElement(k.a,{onClose:function(){return l()},open:i,"aria-labelledby":"simple-dialog-title"},r.a.createElement(x.a,{className:c.title,id:"simple-dialog-title"},"Movie information"),r.a.createElement("form",{action:"/",className:c.container,noValidate:!0,autoComplete:"off"},r.a.createElement(D.a,{id:"outlined-name",label:"Name",className:c.textField,value:n.name,onChange:o("name"),margin:"normal",variant:"outlined"}),r.a.createElement(D.a,{id:"outlined-genre",label:"Genre",className:c.textField,value:n.genre,onChange:o("genre"),margin:"normal",variant:"outlined"}),r.a.createElement(D.a,{id:"outlined-rate",label:"Rate",value:n.rate,onChange:o("rate"),type:"number",className:c.textField,margin:"normal",variant:"outlined"}),r.a.createElement(M.a,{variant:"outlined",className:c.formControlSelect},r.a.createElement(B.a,{ref:function(e){},htmlFor:"outlined-age-simple"},"Director"),r.a.createElement(F.a,{value:n.directorId,onChange:m,input:r.a.createElement(Q.a,{name:"directorId",id:"outlined-director",labelWidth:57})},C.map((function(e){return r.a.createElement(T.a,{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:c.wrapper},r.a.createElement(q.a,{control:r.a.createElement(A.a,{checked:n.watched,onChange:d("watched"),value:"watched"}),label:"Watched movie"}),r.a.createElement(W.a,{onClick:function(){var e=n.id,a=n.name,t=n.genre,r=n.rate,c=n.directorId,i=n.watched;""===a||""===t||""===c?p(!0):(e?v({variables:{id:e,name:a,genre:t,rate:Number(r),directorId:c,watched:Boolean(i)},refetchQueries:[{query:_,variables:{name:""}}]}):b({variables:{name:a,genre:t,rate:Number(r),directorId:c,watched:Boolean(i)},refetchQueries:[{query:_,variables:{name:""}}]}),p(!1),l())},variant:"contained",color:"primary",className:c.button},r.a.createElement(V.a,null)," Save"))),g&&r.a.createElement(J.a,{severity:"error"},"Please note the movie's name and genre and choose the director"))})),te=n(204),re=n(246),le=n(247),ce=n(248),ie=n(249),oe=n(250),me=n(240),ue=n(156),de=n(110),se=n.n(de),he=n(112),ge=n.n(he),pe=n(111),fe=n.n(pe),be=n(140),Ee=n(245),ve=Object(j.a)((function(e){return{searchRoot:{marginBottom:e.spacing(3),minHeight:e.spacing(6),display:"flex"},root:{width:"100%",overflowX:"auto"}}})),Oe=n(242),je=n(243),Ce=n(244),we=n(151),ye=n.n(we),$e=n(108),Se=n.n($e),Ne=function(e){var a=e.open,n=e.handleClose,t=e.handleDelete;return r.a.createElement(k.a,{open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(x.a,{id:"alert-dialog-title"},"Are you sure that you want to delete element?"),r.a.createElement(Oe.a,null,r.a.createElement(je.a,{id:"alert-dialog-description"},"If you click 'Confirm' this element will be removed from data base.")),r.a.createElement(Ce.a,null,r.a.createElement(W.a,{onClick:n,color:"primary"},r.a.createElement(Se.a,null)," Cancel"),r.a.createElement(W.a,{onClick:t,color:"primary",autoFocus:!0},r.a.createElement(ye.a,null)," Confirm")))};function Ie(){var e=Object(X.a)(["\n    mutation deleteMovie($id: ID) {\n        deleteMovie(id: $id) {\n            id\n        }\n    }\n"]);return Ie=function(){return e},e}var ke=Object(K.a)(Ie()),xe=function(e){var a=e.id,n=e.handleClose,t=e.open,l=Object(H.a)(ke),c=Object(u.a)(l,1)[0];return r.a.createElement(Ne,{open:t,handleClose:n,handleDelete:function(){c({variables:{id:a},refetchQueries:[{query:_,variables:{name:""}}]}),n()}})},De=n(159),Me=n(152),Be=n.n(Me),Fe=Object(j.a)((function(e){return{search:{position:"relative",width:"100%",marginBottom:e.spacing(3)},searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(10)}}}))((function(e){var a=e.classes,n=e.name,t=e.handleChange,l=e.handleSearch,c=e.placeholderName;return r.a.createElement("div",{className:a.search},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(Be.a,null)),r.a.createElement(De.a,{onChange:t,onKeyPress:function(e){return l(e)},value:n,placeholder:c,classes:{root:a.inputRoot,input:a.inputInput}}))})),Qe=function(e){var a=e.name,n=e.handleChange,t=e.handleSearch;return r.a.createElement(Fe,{name:a,handleChange:n,handleSearch:t,placeholderName:"Movies Search"})},Te=ve((function(e){var a=e.classes,n=e.onOpen,l=Object(t.useState)([]),c=Object(u.a)(l,2),i=c[0],o=c[1],m=Object(t.useState)(null),d=Object(u.a)(m,2),s=d[0],h=d[1],g=Object(t.useState)(!1),p=Object(u.a)(g,2),f=p[0],b=p[1],E=Object(t.useState)({}),v=Object(u.a)(E,2),O=v[0],j=v[1],C=Object(t.useState)(""),w=Object(u.a)(C,2),y=w[0],$=w[1],S=Object(be.a)(_),N=Object(u.a)(S,2),I=N[0],k=N[1],x=k.loading,D=k.data,M=k.fetchMore;Object(t.useEffect)((function(){I({variables:{name:""}}),D&&o(D.movies)}),[D]);var B=function(){return h(null)},F=function(){n(O),B()},Q=function(){q(),B()},q=function(){return b(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,null,r.a.createElement(Qe,{name:y,handleChange:function(e){$(e.target.value)},handleSearch:function(e){13===e.charCode&&M({variables:{name:y},updateQuery:function(e,a){return a.fetchMoreResult}})}})),r.a.createElement(xe,{open:f,handleClose:function(){return b(!1)},id:O.id}),x?r.a.createElement(Ee.a,{color:"primary"}):r.a.createElement(te.a,{className:a.root},r.a.createElement(re.a,null,r.a.createElement(le.a,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,"Name"),r.a.createElement(ie.a,null,"Genre"),r.a.createElement(ie.a,{align:"right"},"Rate"),r.a.createElement(ie.a,null,"Director"),r.a.createElement(ie.a,null,"Watched"),r.a.createElement(ie.a,{align:"right"}))),r.a.createElement(oe.a,null,i.map((function(e){return r.a.createElement(ce.a,{key:e.id},r.a.createElement(ie.a,{component:"th",scope:"row"},e.name),r.a.createElement(ie.a,null,e.genre),r.a.createElement(ie.a,{align:"right"},e.rate),r.a.createElement(ie.a,null,e.director.name),r.a.createElement(ie.a,null,r.a.createElement(A.a,{checked:e.watched,disabled:!0})),r.a.createElement(ie.a,{align:"right"},r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{color:"inherit",onClick:function(a){return function(e,a){var n=e.currentTarget;h(n),j(a)}(a,e)}},r.a.createElement(se.a,null)),r.a.createElement(ue.a,{id:"simple-menu",anchorEl:s,open:Boolean(s),onClose:B},r.a.createElement(T.a,{onClick:F},r.a.createElement(fe.a,null)," Edit"),r.a.createElement(T.a,{onClick:Q},r.a.createElement(ge.a,null)," Delete")))))}))))))})),qe=I((function(e){var a=e.classes,n=Object(t.useState)({id:"",open:!1,name:"",genre:"",watched:!1,rate:0,directorId:""}),l=Object(u.a)(n,2),c=l[0],i=l[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i((function(a){return Object(y.a)({},a,{},e,{open:!0,directorId:e.director?e.director.id:""})}))},m=function(){i({name:"",genre:"",watched:!1,rate:0,directorId:"",open:!1,id:null})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{handleChange:function(e){return function(a){var n=a.target;i(Object(y.a)({},c,Object(w.a)({},e,n.value)))}},handleSelectChange:function(e){var a=e.target;i(Object(y.a)({},c,Object(w.a)({},a.name,a.value)))},handleCheckboxChange:function(e){return function(a){var n=a.target;i(Object(y.a)({},c,Object(w.a)({},e,n.checked)))}},selectedValue:{id:c.id,name:c.name,genre:c.genre,watched:c.watched,rate:c.rate,directorId:c.directorId},open:c.open,onClose:m}),r.a.createElement("div",{className:a.wrapper},r.a.createElement(Te,{onOpen:o,onClose:m}),r.a.createElement($.a,{onClick:function(){return o()},color:"primary","aria-label":"Add",className:a.fab},r.a.createElement(N.a,null))))})),Ae=Object(j.a)((function(e){return{wrapper:{position:"relative",minHeight:"calc(100vh - 24px * 2 - 72px)"},fab:{position:"absolute",bottom:"0.5rem",right:"4rem"}}})),We=Object(j.a)((function(e){return{container:{padding:e.spacing(2)},title:{paddingBottom:0},textField:{width:"100%"},formControl:{margin:e.spacing.unit,minWidth:120},wrapper:{marginTop:e.spacing(2),display:"flex",justifyContent:"flex-end"},button:{minWidth:100,minHeight:48}}}));function Re(){var e=Object(X.a)(["\n    mutation updateDirector($id: ID, $name: String!, $age: Int!) {\n        updateDirector(id: $id, name: $name, age: $age) {\n            name\n        }\n    }\n"]);return Re=function(){return e},e}function Ve(){var e=Object(X.a)(["\n    mutation addDirector($name: String!, $age: Int!) {\n        addDirector(name: $name, age: $age) {\n            name\n        }\n    }\n"]);return Ve=function(){return e},e}var He=Object(K.a)(Ve()),Ge=Object(K.a)(Re());function Je(){var e=Object(X.a)(["\n    query directorsQuery($name: String) {\n        directors(name: $name) {\n            id\n            name\n            age\n            movies {\n                name\n                id\n            }\n        }\n    } \n"]);return Je=function(){return e},e}var Pe=Object(K.a)(Je()),Xe=We((function(e){var a=e.selectedValue,n=void 0===a?{}:a,l=e.onClose,c=e.classes,i=e.open,o=e.handleChange,m=Object(t.useState)({showAlert:!1,alertMessage:""}),d=Object(u.a)(m,2),s=d[0],h=d[1],g=Object(H.a)(He),p=Object(u.a)(g,1)[0],f=Object(H.a)(Ge),b=Object(u.a)(f,1)[0];return r.a.createElement(k.a,{onClose:function(){return l()},open:i,"aria-labelledby":"simple-dialog-title"},r.a.createElement(x.a,{className:c.title,id:"simple-dialog-title"},"Director information"),r.a.createElement("form",{action:"/",className:c.container,noValidate:!0,autoComplete:"off"},r.a.createElement(D.a,{id:"outlined-name",label:"Name",className:c.textField,value:n.name,onChange:o("name"),margin:"normal",variant:"outlined"}),r.a.createElement(D.a,{id:"outlined-genre",label:"Age",className:c.textField,value:n.age,onChange:o("age"),margin:"normal",variant:"outlined"}),r.a.createElement("div",{className:c.wrapper},r.a.createElement(W.a,{onClick:function(){var e=n.id,a=n.name,t=n.age;""!==a&&Number.isInteger(t)?(e?b({variables:{id:e,name:a,age:Number(t)},refetchQueries:[{query:Pe,variables:{name:""}}]}):p({variables:{name:a,age:Number(t)},refetchQueries:[{query:Pe,variables:{name:""}}]}),h({showAlert:!1,alertMessage:""}),l()):""===a&&h({showAlert:!0,alertMessage:"Director's name should not be empty"})},variant:"contained",color:"primary",className:c.button},r.a.createElement(V.a,null)," Save"))),s.showAlert&&r.a.createElement(J.a,{severity:"error"},s.alertMessage))})),Ke=Object(j.a)((function(e){return{searchRoot:{marginBottom:e.spacing(3),minHeight:e.spacing(6),display:"flex"},root:{width:"100%",overflowX:"auto"}}}));function Le(){var e=Object(X.a)(["\n    mutation deleteDirector($id: ID) {\n        deleteDirector(id: $id) {\n            id\n        }\n    }\n"]);return Le=function(){return e},e}var ze=Object(K.a)(Le()),Ue=function(e){var a=e.id,n=e.handleClose,t=e.open,l=Object(H.a)(ze),c=Object(u.a)(l,1)[0];return r.a.createElement(Ne,{open:t,handleClose:n,handleDelete:function(){c({variables:{id:a},refetchQueries:[{query:Pe,variables:{name:""}}]}),n()}})},Ye=function(e){var a=e.name,n=e.handleChange,t=e.handleSearch;return r.a.createElement(Fe,{name:a,handleChange:n,handleSearch:t,placeholderName:"Directors Search"})},Ze=function(e){var a=e.open,n=e.handleClose,t=e.errorText;return r.a.createElement(k.a,{open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Oe.a,null,r.a.createElement(je.a,{id:"alert-dialog-description"},t)),r.a.createElement(Ce.a,null,r.a.createElement(W.a,{onClick:n,color:"primary"},r.a.createElement(Se.a,null)," Cancel")))},_e=Ke((function(e){var a=e.classes,n=e.onOpen,l=Object(t.useState)([]),c=Object(u.a)(l,2),i=c[0],o=c[1],m=Object(t.useState)(null),d=Object(u.a)(m,2),s=d[0],h=d[1],g=Object(t.useState)(!1),p=Object(u.a)(g,2),f=p[0],b=p[1],E=Object(t.useState)(!1),v=Object(u.a)(E,2),O=v[0],j=v[1],C=Object(t.useState)({}),w=Object(u.a)(C,2),y=w[0],$=w[1],S=Object(t.useState)(""),N=Object(u.a)(S,2),I=N[0],k=N[1],x=Object(be.a)(Pe),D=Object(u.a)(x,2),M=D[0],B=D[1],F=B.data,Q=B.fetchMore;Object(t.useEffect)((function(){M({variables:{name:""}}),F&&o(F.directors)}),[F]);var q=function(){return h(null)},A=function(){y.movies.length>0?R():W(),q()},W=function(){return b(!0)},R=function(){return j(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,null,r.a.createElement(Ye,{name:I,handleChange:function(e){k(e.target.value)},handleSearch:function(e){13===e.charCode&&Q({variables:{name:I},updateQuery:function(e,a){return a.fetchMoreResult}})}})),r.a.createElement(Ue,{open:f,handleClose:function(){return b(!1)},id:y.id}),r.a.createElement(Ze,{open:O,handleClose:function(){return j(!1)},errorText:"Directors with movies cannot be removed"}),r.a.createElement(te.a,{className:a.root},r.a.createElement(re.a,null,r.a.createElement(le.a,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,"Name"),r.a.createElement(ie.a,{align:"right"},"Age"),r.a.createElement(ie.a,null,"Movies"),r.a.createElement(ie.a,null))),r.a.createElement(oe.a,null,i.map((function(e){return r.a.createElement(ce.a,{key:e.id},r.a.createElement(ie.a,{component:"th",scope:"row"},e.name),r.a.createElement(ie.a,{align:"right"},e.age),r.a.createElement(ie.a,null,e.movies.map((function(e,a){return r.a.createElement("div",{key:e.name},"".concat(a+1,". "),e.name)}))),r.a.createElement(ie.a,{align:"right"},r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{color:"inherit",onClick:function(a){return function(e,a){var n=e.currentTarget;h(n),$(a)}(a,e)}},r.a.createElement(se.a,null)),r.a.createElement(ue.a,{id:"simple-menu",anchorEl:s,open:Boolean(s),onClose:q},r.a.createElement(T.a,{onClick:function(){return n(y),void q()}},r.a.createElement(fe.a,null)," Edit"),r.a.createElement(T.a,{onClick:A},r.a.createElement(ge.a,null)," Delete")))))}))))))})),ea=Ae((function(e){var a=e.classes,n=Object(t.useState)({id:null,open:!1,name:"",age:0}),l=Object(u.a)(n,2),c=l[0],i=l[1],o=function(e){i((function(a){return Object(y.a)({},a,{},e,{open:!0})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe,{handleChange:function(e){return function(a){var n=a.target;i(Object(y.a)({},c,Object(w.a)({},e,n.value)))}},selectedValue:{id:c.id,name:c.name,age:c.age},open:c.open,onClose:function(){i({name:"",age:0,id:null,open:!1})}}),r.a.createElement("div",{className:a.wrapper},r.a.createElement(_e,{onOpen:o}),r.a.createElement($.a,{onClick:function(){return o(null)},color:"primary","aria-label":"Add",className:a.fab},r.a.createElement(N.a,null))))})),aa=function(e){var a=e.children,n=e.dir;return r.a.createElement(d.a,{component:"div",dir:n,style:{padding:24}},a)},na=C((function(e){var a=e.classes,n=e.theme,l=Object(t.useState)(0),c=Object(u.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(s.a,{position:"static"},r.a.createElement(h.a,{variant:"fullWidth",value:i,onChange:function(e,a){return o(a)}},r.a.createElement(g.a,{label:"Movies",icon:r.a.createElement(E.a,null)}),r.a.createElement(g.a,{label:"Directors",icon:r.a.createElement(f.a,null)}))),r.a.createElement(O.a,{axis:"rtl"===n.direction?"x-reverse":"x",index:i,onChangeIndex:function(e){return o(e)}},r.a.createElement(aa,{dir:n.direction},r.a.createElement(qe,null)),r.a.createElement(aa,{dir:n.direction},r.a.createElement(ea,null))))})),ta=n(254),ra=n(155),la=n(116),ca=n(115),ia=Object(ra.a)({typography:{useNextVariants:!0,color:"#fff"},palette:{type:"dark",primary:{main:"#E535AB"},secondary:la.a,error:ca.a,contrastThreshold:3,tonalOffset:.2,contrastText:"#fff"}}),oa=new i.a({uri:"https://react-apollo-course.herokuapp.com/graphql",cache:new o.a});var ma=function(){return r.a.createElement(m.a,{client:oa},r.a.createElement(ta.a,{theme:ia},r.a.createElement(na,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ma,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[171,1,2]]]);
//# sourceMappingURL=main.7dfc6b4b.chunk.js.map